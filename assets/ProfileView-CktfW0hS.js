import{i as E,m as P,n as y,d as h,s as c,c as l,a as e,p as g,v as f,f as a,q as _,o as d,k as v,x as $,g as b,e as D,t as C,w as x,l as w}from"./index-B4x-pqFk.js";const p=E("profile",{state:()=>({isEditing:!1,showPasswordChange:!1,profileData:{name:"",email:""},passwordData:{currentPassword:"",newPassword:""},originalData:{name:"",email:""}}),actions:{initializeProfile(){const r=P();r.logged_user&&(this.profileData.name=r.logged_user.name,this.profileData.email=r.logged_user.email,this.originalData.name=r.logged_user.name,this.originalData.email=r.logged_user.email)},toggleEdit(){this.isEditing?this.cancelEdit():(this.isEditing=!0,this.showPasswordChange=!1,this.resetPasswordData())},togglePasswordChange(){this.showPasswordChange=!this.showPasswordChange,this.showPasswordChange||this.resetPasswordData()},resetPasswordData(){this.passwordData.currentPassword="",this.passwordData.newPassword=""},cancelEdit(){this.isEditing=!1,this.showPasswordChange=!1,this.resetPasswordData(),P().logged_user&&(this.profileData.name=this.originalData.name,this.profileData.email=this.originalData.email)},async saveProfile(){const r=P(),s=y();if(r.logged_user)try{if(this.showPasswordChange&&this.passwordData.newPassword.length>0){if(this.passwordData.currentPassword!==r.logged_user.password){s.showMessage("Current password is incorrect");return}if(this.passwordData.newPassword.length<6){s.showMessage("New password must be at least 6 characters long");return}}const o={...r.logged_user,name:this.profileData.name,email:this.profileData.email,password:this.showPasswordChange&&this.passwordData.newPassword.length>0?this.passwordData.newPassword:r.logged_user.password};await r.updateUserProfile(o),this.originalData.name=this.profileData.name,this.originalData.email=this.profileData.email,this.isEditing=!1,this.showPasswordChange=!1,this.resetPasswordData(),s.showMessage("Profile updated successfully!")}catch(o){console.error("Error updating profile:",o),s.showMessage("Failed to update profile. Please try again.")}},updateProfileField(r,s){r in this.profileData&&(this.profileData[r]=s)},updatePasswordField(r,s){r in this.passwordData&&(this.passwordData[r]=s)}},getters:{hasChanges(){return this.profileData.name!==this.originalData.name||this.profileData.email!==this.originalData.email||this.showPasswordChange&&this.passwordData.newPassword.length>0},hasProfileChanges(){return this.profileData.name!==this.originalData.name||this.profileData.email!==this.originalData.email},hasPasswordChanges(){return this.showPasswordChange&&this.passwordData.newPassword.length>0},currentProfileData(){return this.profileData},currentPasswordData(){return this.passwordData},isPasswordChangeActive(){return this.showPasswordChange},isEditMode(){return this.isEditing}}}),V={class:"form-group"},M=["disabled"],S=h({__name:"username",setup(r){const{isEditing:s,profileData:o}=c(p());return(u,t)=>(d(),l("div",V,[t[1]||(t[1]=e("label",{for:"username",class:"form-label"},"Username",-1)),g(e("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=n=>a(o).name=n),type:"text",class:_(["form-input",{editing:a(s)}]),disabled:!a(s),"aria-describedby":"username-help"},null,10,M),[[f,a(o).name]]),t[2]||(t[2]=e("div",{id:"username-help",class:"form-help"},"Your display name",-1))]))}}),z={class:"form-group"},k=["disabled"],B=h({__name:"email",setup(r){const{isEditing:s,profileData:o}=c(p());return v(()=>{console.log(o.value)}),(u,t)=>(d(),l("div",z,[t[1]||(t[1]=e("label",{for:"email",class:"form-label"},"Email",-1)),g(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=n=>a(o).email=n),type:"email",class:_(["form-input",{editing:a(s)}]),disabled:!a(s),"aria-describedby":"email-help"},null,10,k),[[f,a(o).email]]),t[2]||(t[2]=e("div",{id:"email-help",class:"form-help"},"Your email address",-1))]))}}),U={class:"password-section"},N={key:0,class:"password-form"},H={class:"form-group"},F={class:"form-group"},L=h({__name:"password",setup(r){const{togglePasswordChange:s}=p(),{isEditing:o,passwordData:u,showPasswordChange:t}=c(p());return(n,i)=>g((d(),l("div",U,[e("button",{onClick:i[0]||(i[0]=(...m)=>a(s)&&a(s)(...m)),type:"button",class:_(["change-password-btn",{active:a(t)}]),"aria-label":"Change password"},[i[3]||(i[3]=e("svg",{class:"lock-icon",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10z"})],-1)),D(" "+C(a(t)?"Cancel Password Change":"Change Password"),1)],2),a(t)?(d(),l("div",N,[e("div",H,[i[4]||(i[4]=e("label",{for:"currentPassword",class:"form-label"},"Current Password",-1)),g(e("input",{id:"currentPassword","onUpdate:modelValue":i[1]||(i[1]=m=>a(u).currentPassword=m),type:"password",class:"form-input",placeholder:"Enter current password","aria-describedby":"current-password-help"},null,512),[[f,a(u).currentPassword]]),i[5]||(i[5]=e("div",{id:"current-password-help",class:"form-help"},"Enter your current password",-1))]),e("div",F,[i[6]||(i[6]=e("label",{for:"newPassword",class:"form-label"},"New Password",-1)),g(e("input",{id:"newPassword","onUpdate:modelValue":i[2]||(i[2]=m=>a(u).newPassword=m),type:"password",class:"form-input",placeholder:"Enter new password","aria-describedby":"new-password-help"},null,512),[[f,a(u).newPassword]]),i[7]||(i[7]=e("div",{id:"new-password-help",class:"form-help"},"Enter your new password",-1))])])):b("",!0)],512)),[[$,a(o)]])}}),T={key:0,class:"form-actions"},R=["disabled"],Y=h({__name:"actions",setup(r){const{cancelEdit:s}=p(),{hasChanges:o,isEditing:u}=c(p());return(t,n)=>a(u)?(d(),l("div",T,[e("button",{type:"button",onClick:n[0]||(n[0]=(...i)=>a(s)&&a(s)(...i)),class:"btn btn-secondary","aria-label":"Cancel changes"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:!a(o),"aria-label":"Save profile changes"},n[1]||(n[1]=[e("svg",{class:"save-icon",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})],-1),D(" Save Changes ",-1)]),8,R)])):b("",!0)}}),q=h({__name:"form",setup(r){const{saveProfile:s}=p(),{isEditing:o,profileData:u}=c(p());return(t,n)=>(d(),l("form",{onSubmit:n[0]||(n[0]=x((...i)=>a(s)&&a(s)(...i),["prevent"])),class:"profile-form"},[w(S),w(B),w(L),w(Y)],32))}}),A={class:"profile-header"},J={class:"profile-actions"},j=["aria-label"],G={key:0,class:"edit-icon",viewBox:"0 0 24 24",fill:"currentColor"},I={key:1,class:"close-icon",viewBox:"0 0 24 24",fill:"currentColor"},K=h({__name:"header",setup(r){const{toggleEdit:s}=p(),{isEditing:o}=c(p());return(u,t)=>(d(),l("div",A,[t[3]||(t[3]=e("div",{class:"avatar-section"},[e("div",{class:"avatar-circle"},[e("svg",{class:"user-icon",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})])])],-1)),e("div",J,[e("button",{onClick:t[0]||(t[0]=(...n)=>a(s)&&a(s)(...n)),class:_(["edit-btn",{active:a(o)}]),"aria-label":a(o)?"Cancel editing":"Edit profile"},[a(o)?(d(),l("svg",I,t[2]||(t[2]=[e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))):(d(),l("svg",G,t[1]||(t[1]=[e("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},null,-1)]))),D(" "+C(a(o)?"Cancel":"Edit"),1)],10,j)])]))}}),O={class:"profile-card"},Q=h({__name:"container",setup(r){return(s,o)=>(d(),l("div",O,[w(K),w(q)]))}}),W={class:"profile-container"},Z=h({__name:"ProfileView",setup(r){return v(()=>{document.title="JRF | Profile";const{initializeProfile:s}=p();s()}),(s,o)=>(d(),l("div",W,[w(Q)]))}});export{Z as default};
